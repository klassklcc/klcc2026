<!DOCTYPE html>
<html lang="en">
  <head>
    <title>KL Coding Cup</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="icon" href="/images/favicon.png" type="image/png" />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link rel="stylesheet" href="css/animate.css" />

    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />

    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="colorlib-page">
      <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
      <aside id="colorlib-aside" role="complementary" class="js-fullheight">
        <h1 id="colorlib-logo" class="mb-4 mb-md-5">
          <a href="index.html" style="background-color: white">KLCC</a>
        </h1>
        <nav id="colorlib-main-menu" role="navigation">
          <ul>
            <li>
              <h3><a href="index.html">Home</a></h3>
            </li>
            <li class="colorlib-active">
              <h3><a href="single.html">Speed Round</a></h3>
            </li>
            <li>
              <h3><a href="compdets.html">Competition Details</a></h3>
            </li>

            <li>
              <h3><a href="past_content.html">Escape Room Round</a></h3>
            </li>
            <li>
              
            </li>
            <li>
              <h3><a href="about.html">About</a></h3>
            </li>
          </ul>
          <h3 style="padding-top: 100%">
            <a href="https://github.com/asian-mario">Made By: Rangga & Awab</a>
          </h3>
        </nav>
      </aside>
      <!-- END COLORLIB-ASIDE -->
      <!DOCTYPE html>
      <html lang="en">
        <head>
          <title>KLSMC</title>
          <meta charset="utf-8" />
          <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
          />
          <!-- ... other links ... -->
          <link rel="stylesheet" href="css/style.css" />
        </head>
        <body class="dark-theme">
          <!-- ... existing content ... -->
          <div id="colorlib-main">
            <section class="ftco-section ftco-no-pt ftco-no-pb">
              <div class="container" style="padding-top: 20px">
                <div class="square" >
                  <h2>Speed Round</h2>
                  <p>
                    Each question gains max points for every 5 minutes after it is answered, after every 5 minutes to maximum number of points which can be gained is deducted by half. Input your teamID only once below. Each submission has to be followed with a algorithmic check by one of the supervisors to ensure you aren't brute forcing!
                    <br></br>
                    The digital forensics and analysis team of the PD has an open spot for a job, but first you need to pass through some cases as an intern, do you have what it takes? <br></br>
                    Each question provides points with the points halving every 5 minutes. <br>
                  </p>
                </div>
                <div
                  class="four-squares"
                  style="padding-top: 20px; padding-bottom: 2rem"
                >
                  <div class="square">
                    <h2>Debugging Questions</h2>

                    <p>
                      There are a lot of bugs in this code! Figure out the issues and gain points!<br /><br />
                    </p>
                    <a href="codeissues.html" class="btn btn-primary">Question</a>
                  
                  </div>
                  <div class="square">
                    <h2>Decryption key</h2>
                    <p style="padding-bottom: 0%">
                      A suspicious message has been given to you, encoded with a simple structure. Figure out what this message means to show your skills.<br /><br />
                      Difficulty: <b>Easy</b>
                    </p>

                    <a href="q1.html" class="btn btn-primary">Question</a>
                  
                  </div>

                  <div class="square">
                    <h2>Median Breach</h2>
                    <p>
                      To prove you are skilled enough to join the team, the director has given you a challenge. Try not to fail, as this question deducts <b>40 Points</b> if answered incorrectly<br></br> 
                      Difficulty: <b>Easy/Moderate</b>
                    </p>

                    <a
                      href="q2.html"
                      class="btn btn-disabled"
                      >Question</a
                    >
                  
                  </div>
                  <div class="square">
                      <h2>Triple sum</h2>
                    <p style="padding-bottom: 0%">
                      The director is still unsure of your skills. Prove him wrong, and show you are smart enough to join the team. He wants to find all triples in an array such that their sum is equal to the input.<br /><br />
                      Warning! This question deducts <b>40 Points</b> if answered incorrectly<br></br> 

                      Difficulty:
                      <b
                        >Moderate/Medium</b
                      >
                    </p>
                    <a href="./q3.html" class="btn btn-disabled"
                      >Question</a
                    >
                  </div>
                  <div class="square">
                    <h2>Security feed</h2>
                    <p>
                      Congratulations! You have been accepted to the team! However, the director has encountered an issue. The security feed is broken and the error message is showing a strange binary string!
                      <br /><br />
                      The input is denoted by a binary string <b>S</b>. 
                      <ul>
                        <li>Your task is to find the maximum number of zeroes possible given the following operation:
                          </li>
                        <li>Choose any two indices <b>i</b> and <b>j</b>. Replace either <b>i</b> or <b>j</b> with the bitwise XOR operation of <b>i</b> and <b>j</b>.</li>
                     
                      </ul>
                      
                      Difficulty:
                      <b>Hard</b>
                    </p>
                    <a
                      href="./q4.html"
                      class="btn btn-disabled"
                      >Question</a
                    >
                  </div>
                  <div class="square">
                    <h2>Good mood</h2>
                    <p style="padding-bottom: 0%">
                      The stress of being on the team is taking a toll. Each day, your mood fluctuates wildly. Some days are great, and others are filled with despair. Track the longest streak of "good mood days" to determine when you're most effective.<br /><br />
                      Input is denoted by an array <b>D</b>
                      <ul>
                        <li>Each integer represents your mood score for a particular day: positive values are good days, and negative values are bad days.</li>
                        <li>Your task is to find the maximum consecutive sum</li>
                      </ul>

                      Difficulty:
                      <b
                        >Hard</b
                      >
                    </p>
                    <a href="./q5.html" class="btn btn-disabled"
                      >Question</a
                    >
                  </div>
                  <div class="square">
                    <h2>The Sequence Riddle</h2>
                    <p style="padding-bottom: 0%">
                      The mastermind has left behind a series of encoded numbers. Intelligence suggests these numbers form a sequence with hidden meaning <br /><br />

                      Input is denoted by a list of integers nums
                      <ul>
                        <li>Your task is to find the length of the longest subsequence that is strictly increasing.</li>
                        <li>A subsequence is a sequence derived from the input array by deleting some or no elements without changing the order of the remaining elements.
                          For example, given nums = [10, 9, 2, 5, 3, 7, 101, 18], the LIS is [2, 3, 7, 101] with a length of 4.</li>
                      </ul>
                      Difficulty:
                      <b
                        >Hard</b
                      >
                    </p>
                    <a href="./q7.html" class="btn btn-disabled"
                      >Question</a
                    >
                  </div>
                  <div class="square">
                    <h2>Market Interception</h2>
                    <p style="padding-bottom: 0%">
                      The criminal syndicate is profiting from a volatile artifact trading market. Your mission is to determine the perfect time to buy low and sell high to intercept the syndicate's profits. <br /><br />

                      Input is denoted by a list of integers `prices`.  
                      <ul>
                        <li>Each integer represents the price of the artifact on a given day.</li>
                        <li>Your task is to maximize profit by choosing one day to buy and one day to sell, ensuring the buying day comes before the selling day.  
                          If no profit can be made, return `0`.  
                          For example, given `prices = [7, 1, 5, 3, 6, 4]`, buy on day 2 (price = 1) and sell on day 5 (price = 6), yielding a profit of `6 - 1 = 5`.</li>
                      </ul>
                      <br>
                      <p>WARNING! This question deducts 60 points for any wrong attempt!</p>
                      Difficulty:
                      <b
                        >Hard</b
                      >
                    </p>
                    <a href="./q8.html" class="btn btn-disabled"
                      >Question</a
                    >
                  </div>
                  <div class="square">
                    <h2 class="colorlib-heading">Leaderboard</h2>
                    <table id="leaderboardTable">
                      <thead>
                        <tr>
                          <th>Position</th> <!-- New Position column -->
                          <th>Team Name</th>
                          <th>Points</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Dynamic rows will be inserted here -->
                      </tbody>
                    </table>
                  </div>
                  </div>
                </div>

              </div>
            </section>
          </div>
          <script>
    document.addEventListener("DOMContentLoaded", function () {
    // Fetch data from the Google Sheets CSV
    fetch(
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vTea1Hp5rkgRfh49dopeM58Q6F4qVSrZRQWIHmjPYYjabpf1hCtiB4_8waPVBgmMCjCbU5mn3fPb7II/pub?gid=1927463165&single=true&output=csv"
    )
      .then((response) => response.text())
      .then((csv) => {
        let lines = csv.split("\n"); // Split CSV into lines
        console.log("CSV Preview:", lines.slice(0, 5)); // Debug the first few lines

        let result = []; // This will store the leaderboard data

        // Loop through rows (start from row 2 to skip the header)
        for (let i = 1; i < lines.length; i++) {
          let currentline = lines[i].split(",").map((cell) => cell.trim());

          // Skip rows without valid data (e.g., missing Team ID or Total)
          if (currentline.length < 4 || !currentline[0] || isNaN(Number(currentline[3]))) {
            continue;
          }

          // Extract Team ID and Total
          let teamID = currentline[0]; // Column A
          let total = Number(currentline[3]); // Column D

          result.push({ "Team ID": teamID, Total: total });
        }

        // Sort by Total (descending)
        result.sort((a, b) => b.Total - a.Total);

        // Limit to top 15 entries
        let top15 = result.slice(0, 15);

        // Update the leaderboard table
        const tableBody = document
          .getElementById("leaderboardTable")
          .getElementsByTagName("tbody")[0];
        tableBody.innerHTML = ""; // Clear existing table content

        top15.forEach((row, index) => {
          let tr = document.createElement("tr");
          tr.innerHTML = `<td>${index + 1}</td><td>${row["Team ID"]}</td><td>${row.Total}</td>`;
          tableBody.appendChild(tr);
        });
      })
      .catch((error) => console.error("Error:", error));
  });

            const sections = [
              { id: "fermi", duration: 60 * 5 }, // 5 minutes for Fermi Problems
              { id: "calculus", duration: 60 * 10 }, // 10 minutes for Calculus Round
              { id: "proof", duration: 60 * 15 }, // 15 minutes for In Pursuit of Proof
              // ... add more sections if needed ...
            ];

            function formatTime(duration) {
              var hours = parseInt(duration / 3600, 10);
              var minutes = parseInt((duration % 3600) / 60, 10);
              var seconds = parseInt(duration % 60, 10);
              hours = hours < 10 ? "0" + hours : hours;
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              return hours + ":" + minutes + ":" + seconds;
            }

            function resetTimer(linkId) {
              localStorage.removeItem(linkId + "-end");
              localStorage.removeItem(linkId + "-version");
              localStorage.removeItem(linkId + "-reset");
              var section = sections.find((s) => linkId.startsWith(s.id));
              if (section) {
                var timerDisplay = document.querySelector(
                  "#timer" +
                    section.id.charAt(0).toUpperCase() +
                    section.id.slice(1)
                );
                timerDisplay.textContent = formatTime(section.duration);
                var linkElement = document.getElementById(linkId);
                linkElement.style.display = "none"; // Hide the link when resetting
              }
            }

            function startTimer(duration, display, linkId) {
              var end = localStorage.getItem(linkId + "-end");
              var resetFlag = localStorage.getItem(linkId + "-reset");
              if (resetFlag === "true" || !end) {
                resetTimer(linkId);
                end = Date.now() + duration * 1000;
                localStorage.setItem(linkId + "-end", end);
                localStorage.removeItem(linkId + "-reset");
              }
              var interval = setInterval(function () {
                var remaining = end - Date.now();
                var timer = remaining / 1000;
                if (remaining <= 0) {
                  clearInterval(interval);
                  display.textContent = "00:00:00";
                  var linkElement = document.getElementById(linkId);
                  linkElement.style.display = "block"; // Show the link when the timer ends
                  localStorage.removeItem(linkId + "-end");
                } else {
                  display.textContent = formatTime(timer);
                }
              }, 1000);
            }

            window.onload = function () {
              sections.forEach(function (section) {
                var timerDisplay = document.getElementById(
                  "timer" +
                    section.id.charAt(0).toUpperCase() +
                    section.id.slice(1)
                );
                var linkId = section.id + "-link";
                startTimer(section.duration, timerDisplay, linkId);
              });
            };
          </script>
          <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Define release times for each question in GMT+8
                const releaseTimes = {
                    "Q1": new Date("2025-03-02T10:20:00+08:00"),
                    "Q2": new Date("2025-03-02T10:25:00+08:00"),
                    "Q3": new Date("2025-03-02T10:30:00+08:00"),
                    "Q4": new Date("2025-03-02T10:35:00+08:00"),
                    "Q5": new Date("2025-03-02T10:40:00+08:00"),
                    "Q6": new Date("2025-03-02T10:45:00+08:00"),
                    "Q7": new Date("2025-03-02T10:50:00+08:00"),
                    "Q8": new Date("2025-03-02T10:55:00+08:00")
                };
          
                function updateButtons() {
                    const now = new Date(); // Current time in the user's timezone
                    const gmt8Now = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Singapore" })); // Convert to GMT+8
          
                    document.querySelectorAll("a.btn-disabled").forEach(button => {
                        const questionKey = button.getAttribute("href").match(/q(\d+)/i); // Extract Q1, Q2, etc.
                        
                        if (questionKey) {
                            const qNumber = "Q" + questionKey[1]; // Convert to Q1, Q2...
                            
                            if (releaseTimes[qNumber] && gmt8Now >= releaseTimes[qNumber]) {
                                button.classList.remove("btn-disabled");
                                button.classList.add("btn-primary");
                            }
                        }
                    });
                }
          
                updateButtons(); // Run on page load
                setInterval(updateButtons, 1000); // Check every second for updates
            });
          </script>          
        </body>
      </html>

      <!-- END COLORLIB-MAIN -->
    </div>
    <!-- END COLORLIB-PAGE -->

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
      <svg class="circular" width="48px" height="48px">
        <circle
          class="path-bg"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke="#eeeeee"
        />
        <circle
          class="path"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke-miterlimit="10"
          stroke="#F96D00"
        />
      </svg>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/scrollax.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src="js/google-map.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
